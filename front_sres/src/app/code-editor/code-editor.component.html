<!-- code-editor.component.html -->
<div class="container mt-2">
    <div class="row">
      <div class="col-12 ">
  
        <div class="text-center mb-4">
          <h2 class="display-4">Code Editor</h2>
          <p class="lead mb-0">Write your code in Python or R and generate visualizations!</p>   
        </div>
  
        <div class="row">
          <div class="col-12 col-md-6 mb-4 d-flex">
            <div class="card shadow-lg w-100 d-flex">
              <div class="card-body d-flex flex-column">
                <div class="form-group">
                  <label for="language" class="form-label">Choose Language</label>
                  <select [(ngModel)]="language" class="form-select" id="language">
                    <option value="python">Python</option>
                    <option value="r">R</option>
                  </select>
                </div>
  
                <div class="form-group mt-4">
                  <label for="code" class="form-label">Write Your Code</label>
                  <textarea [(ngModel)]="code" class="form-control" id="code" rows="10"></textarea>
                </div>
  
                <button (click)="submitCode()" class="btn btn-primary mt-4 w-100">Generate Plot</button>
              </div>
            </div>
          </div>
  
          
          <div class="col-12 col-md-6 mb-4 d-flex">
            <div class="card shadow-lg w-100 d-flex">
              <div class="card-body d-flex flex-column">
                  <h4 class="text-center">Generated Output</h4>
                <!-- <div *ngIf="isHTML()">
                  <h4 class="text-center">Generated Output</h4>
                  <iframe [src]="getSafeUrl(outputHtmlUrl ?? '')" width="600" height="400" class="w-100"></iframe>
                </div> -->

                <div *ngIf="language === 'python' && outputHtmlUrl">
                    <iframe [src]="getSafeUrl(outputHtmlUrl)" width="600" height="400" class="w-100"></iframe>
                  </div>
    
                  <div *ngIf="language === 'r' && outputUrl">
                    <!-- <h4 class="text-center">Generated Output</h4> -->
                    <img [src]="outputUrl" alt="R Plot" width="600" class="w-100"/>
                  </div>
              </div>
            </div>
          </div>
  
        </div> 
  
      </div>
    </div>
  </div>
  


<!-- 

  <select [(ngModel)]="language">
    <option value="python">Python</option>
    <option value="r">R</option>
</select>
<br >

<textarea [(ngModel)]="code" rows="10" cols="80"></textarea>
<button (click)="submitCode()">Generate</button>
<br >
<div *ngIf="outputUrl">
    <img *ngIf="isImage()" [src]="outputUrl" alt="Generated Chart" />
    <iframe *ngIf="isHTML()" [src]="outputUrl" width="600" height="400"></iframe>
</div> -->
